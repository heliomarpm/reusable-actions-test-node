name: "2. Pull Request"
description: "Automatically create a pull request when the CI workflow succeeds and the head branch is not 'main'"

on:
  workflow_run:
    workflows: ["1. Quality Assurance"]
    types:
      - completed
  # push:
  #   branches:
  #     - feature/**
  #     - develop
      
jobs:
  app:
    if: >
      ${{
        github.event.workflow_run.conclusion == 'success'
        && github.event.workflow_run.head_branch != 'main'
      }}

    uses: heliomarpm/reusable-actions/.github/workflows/cd-pull-request.yml@main
    with:
      min-coverage: 85
      coverage-mode: info
    secrets:
      GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
